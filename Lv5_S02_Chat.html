<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5ë‹¨ê³„ 2ê°•: ì‹¤ì‹œê°„ ì±„íŒ…ë°©</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fff7ed; }
        .kids-font { font-family: 'Jua', sans-serif; }
        .chat-bubble { max-width: 75%; position: relative; }
        /* ë§í’ì„  ê¼¬ë¦¬ */
        .bubble-right::after {
            content: ''; position: absolute; right: -6px; top: 10px;
            border-left: 8px solid #f97316; border-top: 6px solid transparent; border-bottom: 6px solid transparent;
        }
        .bubble-left::after {
            content: ''; position: absolute; left: -6px; top: 10px;
            border-right: 8px solid #e5e7eb; border-top: 6px solid transparent; border-bottom: 6px solid transparent;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            const [chats, setChats] = useState([
                { id: 1, text: "ì•ˆë…•? ë‚˜ëŠ” ì œë¯¸ë‚˜ì´ ë´‡ì´ì•¼! ğŸ‘‹", isMe: false },
                { id: 2, text: "ë‚˜ë‘ ì‹¤ì‹œê°„ìœ¼ë¡œ ëŒ€í™”í•´ë³´ì.", isMe: false }
            ]);
            const [input, setInput] = useState("");
            const chatEndRef = useRef(null);

            // ìë™ ìŠ¤í¬ë¡¤
            useEffect(() => {
                chatEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [chats]);

            const sendMessage = () => {
                if (!input.trim()) return;

                // 1. ë‚´ ë©”ì‹œì§€ ë³´ë‚´ê¸°
                const myMsg = { id: Date.now(), text: input, isMe: true };
                setChats(prev => [...prev, myMsg]);
                setInput("");

                // 2. ì œë¯¸ë‚˜ì´ ë´‡ì˜ ì‹¤ì‹œê°„ ë‹µì¥ ì‹œë®¬ë ˆì´ì…˜
                setTimeout(() => {
                    const botReplies = [
                        "ìš°ì™€, ì •ë§ ë©‹ì§„ ë§ì´ì•¼! ğŸ˜®",
                        "ì‹¤ì‹œê°„ìœ¼ë¡œ ëŒ€í™”í•˜ë‹ˆê¹Œ ì¬ë°Œì§€? âš¡",
                        "Firebase DBë¥¼ ì“°ë©´ ì¹œêµ¬ë‘ë„ ì´ë ‡ê²Œ í•  ìˆ˜ ìˆì–´!",
                        "ë‚´ê°€ ë„ì™€ì¤„ ë‹¤ë¥¸ ê±´ ì—†ì–´? ğŸ¤–",
                        "ì½”ë”© ì‹¤ë ¥ì´ ì ì  ëŠ˜ê³  ìˆë„¤! ğŸ‘"
                    ];
                    const randomReply = botReplies[Math.floor(Math.random() * botReplies.length)];
                    const botMsg = { id: Date.now() + 1, text: randomReply, isMe: false };
                    setChats(prev => [...prev, botMsg]);
                }, 1000); // 1ì´ˆ ë’¤ì— ë‹µì¥
            };

            return (
                <div className="min-h-screen flex flex-col items-center py-8 px-4">
                    {/* í—¤ë” */}
                    <div className="w-full max-w-md flex justify-between items-center mb-6">
                        <button onClick={() => window.location.href='index.html'} className="bg-white p-2 rounded-lg shadow text-orange-500 hover:bg-orange-50">
                            <i className="ph-bold ph-house text-xl"></i>
                        </button>
                        <div className="text-center">
                            <span className="text-xs bg-orange-200 text-orange-800 px-2 py-1 rounded-full font-bold">5ë‹¨ê³„ 2ê°•</span>
                            <h1 className="text-2xl font-bold text-gray-800 kids-font">ğŸ’¬ ì‹¤ì‹œê°„ ì±„íŒ…ë°©</h1>
                        </div>
                        <button onClick={() => window.location.href='Lv6_S01_Github.html'} className="bg-green-500 text-white p-2 rounded-lg shadow hover:bg-green-600 font-bold text-sm">
                            6ë‹¨ê³„ë¡œ <i className="ph-bold ph-arrow-right"></i>
                        </button>
                    </div>

                    {/* ì±„íŒ…ì•± ì»¨í…Œì´ë„ˆ */}
                    <div className="w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-orange-300 flex flex-col h-[600px]">
                        
                        {/* ì±„íŒ…ë°© ìƒë‹¨ë°” */}
                        <div className="bg-orange-500 p-4 flex items-center text-white shadow-md z-10">
                            <div className="w-10 h-10 bg-white rounded-full flex items-center justify-center text-2xl mr-3 border-2 border-yellow-300">
                                ğŸ¤–
                            </div>
                            <div>
                                <h2 className="font-bold kids-font text-lg">ì œë¯¸ë‚˜ì´ ë´‡</h2>
                                <div className="flex items-center text-xs text-orange-100">
                                    <span className="w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"></span>
                                    í˜„ì¬ í™œë™ ì¤‘
                                </div>
                            </div>
                        </div>

                        {/* ì±„íŒ… ë‚´ìš© ì˜ì—­ */}
                        <div className="flex-1 overflow-y-auto p-4 bg-orange-50">
                            {chats.map((chat) => (
                                <div key={chat.id} className={`flex mb-4 ${chat.isMe ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`
                                        p-3 rounded-2xl shadow-sm text-sm font-medium chat-bubble
                                        ${chat.isMe 
                                            ? 'bg-orange-500 text-white rounded-tr-none bubble-right' 
                                            : 'bg-gray-200 text-gray-800 rounded-tl-none bubble-left'}
                                    `}>
                                        {chat.text}
                                    </div>
                                </div>
                            ))}
                            <div ref={chatEndRef} />
                        </div>

                        {/* ì…ë ¥ì°½ ì˜ì—­ */}
                        <div className="p-3 bg-white border-t border-gray-200 flex items-center gap-2">
                            <input 
                                type="text" 
                                value={input}
                                onChange={(e) => setInput(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                                placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                                className="flex-1 bg-gray-100 p-3 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-400 text-sm"
                            />
                            <button 
                                onClick={sendMessage}
                                className="bg-orange-500 text-white w-10 h-10 rounded-full flex items-center justify-center shadow hover:bg-orange-600 transition transform active:scale-95"
                            >
                                <i className="ph-bold ph-paper-plane-right text-xl"></i>
                            </button>
                        </div>
                    </div>

                    {/* í•™ìŠµ íŒ */}
                    <div className="mt-6 max-w-md text-center text-gray-500 text-sm">
                        <p>
                            <i className="ph-fill ph-lightning text-yellow-500"></i>
                            <strong>ì‹¤ì‹œê°„ ë™ê¸°í™”:</strong><br/>
                            FirebaseëŠ” ì¹œêµ¬ê°€ ë³´ë‚¸ ë©”ì‹œì§€ë¥¼<br/>
                            ìƒˆë¡œê³ ì¹¨ ì—†ì´ ë°”ë¡œ(Real-time) ë³´ì—¬ì£¼ëŠ” ë§ˆë²•ì„ ë¶€ë ¤ìš”!
                        </p>
                    </div>

                </div>
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>